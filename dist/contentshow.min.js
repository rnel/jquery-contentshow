!function(t,n,e,o){function i(t,n,e){var o;return function(){var i=this,s=arguments,r=function(){o=null,e||t.apply(i,s)},c=e&&!o;clearTimeout(o),o=setTimeout(r,n),c&&t.apply(i,s)}}function s(n){var e=-1;return n.each(function(){var n=t(this).data("csOrder");n>e&&(e=n)}),e}function r(n,e){this.element=n,this.$el=t(n),this.metadata=this.$el.data(),this.options=t.extend({},h,e,this.metadata),this._defaults=h,this._name=c,this.init()}var c="contentshow",h={debounceDelay:100,startOffset:100,endOffset:100,useViewportUnit:!1,sectionIndex:0,contentAnimateClass:"contentshow-animate",scrollableClass:"scrollable-container",onSectionChange:null,onContentChange:null,swipe:{threshold:30,maxDuration:200}},a={PREV:1,NEXT:2};r.prototype={init:function(){this.$contentshow=this.$el,this.$contentshowSectionsContainer=this.$contentshow.find(".contentshow-sections-container"),this.$contentshowSections=this.$contentshow.find(".contentshow-section:visible"),this.$nextButton=this.$contentshow.find(".contentshow-next-button"),this.totalSections=this.$contentshowSections.length,this.direction=a.NEXT,this.buildNavigation(),this.setEvents(),this.disableScrollOnTouchDevices(),this.start()},buildNavigation:function(){for(var t=this.$contentshow.find(".contentshow-nav"),n=[],e=0;e<this.totalSections;e++)n[e]='<li><span class="contentshow-nav-item" data-section-index="'+e+'"></span></li>';t.html("<ul>"+n.join("")+"</ul>"),this.$contentshowNavItems=t.find(".contentshow-nav-item"),this.$contentshowNavItems.first().addClass("active visited")},setEvents:function(){var e=this;t(n).on("wheel",i(function(n){if(!t(n.target).is("."+e.options.scrollableClass)||0==t(n.target).closest("."+e.options.scrollableClass).length){var o=n.originalEvent.deltaY;e.onscroll(o)}},this.options.debounceDelay,!0)),this.$contentshow.on("touchstart",function(t){e.startSwipe=t.originalEvent.changedTouches[0].pageY,e.startTime=(new Date).getTime()}),this.$contentshow.on("touchend touchcancel",function(n){if(t(n.target).not("."+e.options.scrollableClass)||0==t(n.target).closest("."+e.options.scrollableClass).length){var o,i=n.originalEvent.changedTouches[0].pageY,s=Math.abs(i-e.startSwipe),r=(new Date).getTime(),c=r-e.startTime;c<=e.options.swipe.maxDuration&&s>=e.options.swipe.threshold&&(o=e.startSwipe-i,e.onscroll(o))}}),this.$contentshowNavItems.click(function(n){var o=t(this).data("sectionIndex");e.jumptoSection(o)}),this.$nextButton.click(function(t){e.onscroll(1)}),t("html").keydown(function(t){38==t.which?e.onscroll(-1):40==t.which&&e.onscroll(1)})},onscroll:function(t){var n;this.$currentSection||(this.$currentSection=this.$contentshowSections.eq(this.currentSectionIndex)),n=0>t?a.PREV:a.NEXT,this.showContent(n)},start:function(){"number"!=typeof this.options.sectionIndex||this.options.sectionIndex<=0?this.gotoSection(0):this.jumptoSection(this.options.sectionIndex)},gotoSection:function(t){var n,e;this.$contentshow.removeClass("current-section-"+this.currentSectionIndex),this.currentSectionIndex=t,this.$contentshowNavItems.removeClass("active"),this.$contentshowNavItems.eq(this.currentSectionIndex).addClass("active visited"),n=-100*this.currentSectionIndex,e=Modernizr.csstransforms3d?"translate3d(0, "+n+"vh, 0)":"translateY("+n+"vh)",this.$contentshowSectionsContainer.css("transform",e),this.$currentSection=this.$contentshowSections.eq(this.currentSectionIndex),this.currentHighestContentOrder=s(this.$currentSection.find(".contentshow-content")),this.$currentContentContainer=this.$currentSection.find(".contentshow-grouped-contents"),this.direction===a.NEXT&&(this.currentContentOrder=-1,this.showContent(this.direction)),this.$contentshow.addClass("current-section-"+this.currentSectionIndex),"function"==typeof this.options.onSectionChange&&this.options.onSectionChange.call(this,{$section:this.$currentSection,sectionIndex:this.currentSectionIndex})},showContent:function(t){var n,e,o,i;if(this.direction=t,this.direction===a.PREV){if(0===this.currentContentOrder&&0===this.currentSectionIndex)return;e=this.$currentSection.find('.contentshow-content[data-cs-order="'+this.currentContentOrder+'"]'),e.removeClass(this.options.contentAnimateClass),this.adjustGroupedContentsContainers(),o=this.currentContentOrder-1,-1===o?(i=this.currentSectionIndex-1,this.gotoSection(i),this.currentContentOrder=this.currentHighestContentOrder):this.currentContentOrder=o,n=this.$currentSection.find('.contentshow-content[data-cs-order="'+this.currentContentOrder+'"]'),this.triggerContentChange(n),this.toggleNextButton()}else this.direction===a.NEXT&&(o=this.currentContentOrder+1,-1===this.currentContentOrder&&-1===this.currentHighestContentOrder?this.currentContentOrder=o:o<=this.currentHighestContentOrder?(this.currentContentOrder=o,n=this.$currentSection.find('.contentshow-content[data-cs-order="'+this.currentContentOrder+'"]'),n.addClass(this.options.contentAnimateClass),this.triggerContentChange(n),this.adjustGroupedContentsContainers(),this.toggleNextButton()):this.currentSectionIndex<this.totalSections-1&&(i=this.currentSectionIndex+1,this.gotoSection(i)))},triggerContentChange:function(t){"function"==typeof this.options.onContentChange&&t.length&&this.options.onContentChange.call(this,{$content:t,contentOrder:this.currentContentOrder,sectionIndex:this.currentSectionIndex})},toggleNextButton:function(){this.currentSectionIndex===this.totalSections-1&&this.currentContentOrder===this.currentHighestContentOrder?(this.$nextButton.hide(),this.$contentshow.addClass("last-content")):(this.$nextButton.is(":visible")||this.$nextButton.show(),this.$contentshow.removeClass("last-content"))},adjustGroupedContentsContainers:function(n){var e=this,n=n||this.$currentContentContainer;n.each(function(){e.adjustGroupedContentsContainerPosition(t(this))})},adjustGroupedContentsContainerPosition:function(n){var o,i=t(e).height(),s=i-this.options.startOffset-this.options.endOffset,r=0,c=this.options.useViewportUnit?"vh":"px";n.find("."+this.options.contentAnimateClass).each(function(){r+=t(this).outerHeight(!0)}),0===r?o=i:(o=s>r?50-r/i*100/2:-((r-(i-this.options.endOffset))/i*100),this.options.useViewportUnit?o=o:o*=i/100),o+=c;var h;h=Modernizr.csstransforms3d?"translate3d(0, "+o+", 0)":"translateY("+o+")",n.css("transform",h)},jumptoSection:function(t){var n=this.currentSectionIndex||0;this.currentSectionIndex!==t&&(t>n?this.fastForward(n,t):this.fastRewind(n,t))},fastForward:function(t,n){for(var e=t;n>e;e++)this.showAllContent(e);this.direction=a.NEXT,this.gotoSection(n)},fastRewind:function(t,n){for(var e=t;e>=n;e--)this.hideAllContent(e);this.direction=a.NEXT,this.gotoSection(n)},showAllContent:function(t){var n=this.$contentshowSections.eq(t),e=n.find(".contentshow-grouped-contents"),o=n.find(".contentshow-content");o.addClass(this.options.contentAnimateClass),this.adjustGroupedContentsContainers(e)},hideAllContent:function(t){var n=this.$contentshowSections.eq(t).find(".contentshow-content");n.removeClass(this.options.contentAnimateClass)},disableScrollOnTouchDevices:function(){Modernizr.touch&&(t(n).on("touchmove",function(t){t.preventDefault()}),setTimeout(function(){t(n).scrollTop(0)},1e3))}},t.fn[c]=function(n){return this.each(function(){t.data(this,"plugin_"+c)||t.data(this,"plugin_"+c,new r(this,n))})}}(jQuery,window,document);